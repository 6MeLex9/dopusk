; Тестовая программа для УВМ
; Демонстрирует все команды

; Тест 1: LOAD 862, 19
LOAD 862, 19    ; Загрузить 862 в регистр 19

; Тест 2: READ 43, 11
; Предварительно нужно записать что-то в память
LOAD 777, 11    ; Загрузить 777 в регистр 11 (будет использоваться как адрес)
LOAD 999, 0     ; Загрузить значение для записи
STORE 777, 0    ; Записать значение из регистра 0 по адресу 777
READ 43, 11     ; Прочитать из памяти по адресу в R11 в регистр 43

; Тест 3: STORE 955, 60
LOAD 12345, 60  ; Загрузить значение в регистр 60
STORE 955, 60   ; Записать его в память по адресу 955

; Тест 4: ROTR 36, 48
; Для теста циклического сдвига
LOAD 0x12345678, 36  ; Загрузить тестовое значение
LOAD 4, 0           ; Значение сдвига = 4
STORE 100, 0        ; Сохранить сдвиг в память по адресу 100
LOAD 100, 48        ; Загрузить адрес 100 в регистр 48
ROTR 36, 48         ; Выполнить циклический сдвиг R36 на значение из памяти по адресу в R48

; Тест 5: Копирование массива (демонстрация)
; Копируем 5 значений из адресов 200-204 в 300-304
LOAD 200, 1        ; Начальный адрес источника
LOAD 300, 2        ; Начальный адрес назначения
LOAD 5, 3          ; Счетчик

loop_start:
; Чтение из источника
READ 10, 1         ; Читаем в регистр 10 по адресу из R1
; Запись в назначение
STORE 0, 2         ; Адрес назначения пока в памяти по адресу 0 (временное)
LOAD 0, 11         ; Читаем адрес назначения
STORE 0, 10        ; Записываем значение из R10

; Увеличиваем адреса
LOAD 1, 4
ADD 1, 4           ; R1 = R1 + 1
LOAD 1, 5
ADD 2, 5           ; R2 = R2 + 1

; Уменьшаем счетчик
LOAD 1, 6
SUB 3, 6           ; R3 = R3 - 1

; Проверка условия
LOAD 0, 7
COMPARE 3, 7       ; Сравниваем R3 с 0
JUMP_IF_NOT_ZERO loop_start  ; Если не ноль, продолжаем цикл